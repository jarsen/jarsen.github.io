---
layout: post
title: Swift Data Pipelines
feature-img: "img/pipe.jpg"
---

At some point or another we've all seen code like this in our careers:

{% highlight swift %}
let students = Database.allStudents()
let grades = Grades.forStudents(students)
let curvedGrades = curve(grades, average: 0.6)
let finalGrades = prepareGrades(curvedGrades)
{% endhighlight %}

This code is not bad: it's simple and has clear variable naming.
However, could we do better if we somehow removed all the one-shot variables?
Their only real purpose is to hold a value till we use it in the next line. It  could be
difficult to someone reading this code to see through the noise of one-shot variables to
realize what is happening.

{% highlight swift %}
prepareGrades(curve(Grades.forStudents(Database.allStudents()), average: 0.6))
{% endhighlight %}

Well, that was gross.

#### Meet the Forward Pipe Operator

The forward pipe operator is a simple infix operator. It takes the left hand side
of the expression and applies it as the first argument to the function on the right.
For example:

{% highlight swift %}
1 |> increment    // increment(1)

5 |> (divide, 10) // divide(5, 10)

1...100 |> (map, increment) // map(1...100, increment)
{% endhighlight %}

{% highlight swift %}
let finalGrades = Database.allStudents()
                  |> Grades.forStudents
                  |> curve(average: 0.6)
                  |> prepareGrades
{% endhighlight %}

(You may notice here I use a tuple, where in the previous example I did not.
That's because I'm cheating. I'll explain how later on.)

Chaining methods vs chaining functions. Don't make no difference.

## Optional Pipelines

## Result Pipelines

## Keeping Your Pipelines Clean

### Prefer pure functions
Pipes provides implementations of stuff

### Cheating Tuples
It also helps that instance methods are curried


## Resources
* Pipes on Github
* Recent Cocoaheads talk
